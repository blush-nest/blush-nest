<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Blush Nest</title>
  <link rel="shortcut icon" href="blush_nest.png" type="image/x-icon" />
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css"
  />
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
  />
  <link rel="stylesheet" href="style.css" />
  <style>
    /* Just some margin for search input */
    #searchInput {
      max-width: 200px;
      margin-left: 1rem;
    }
  </style>
</head>
<body>
   <!-- NAVIGATION BAR -->
   <nav class="navbar navbar-expand-lg navbar-light bg-light py-3 fixed-top">
     <div class="container">
       <a class="navbar-brand" href="#">BLUSH NEST</a>
       <button
         class="navbar-toggler"
         type="button"
         data-bs-toggle="collapse"
         data-bs-target="#navbarSupportedContent"
         aria-controls="navbarSupportedContent"
         aria-expanded="false"
         aria-label="Toggle navigation"
       >
         <span id="bar"><i class="fas fa-bars"></i></span>
       </button>
       <div class="collapse navbar-collapse" id="navbarSupportedContent">
         <ul class="navbar-nav ml-auto align-items-center">
           <li class="nav-item"><a class="nav-link" href="#">Home</a></li>
           <li class="nav-item"><a class="nav-link" href="#featured">Shop</a></li>
           <li class="nav-item"><a class="nav-link" href="#footer">About</a></li>
           <li class="nav-item"><a class="nav-link" href="#footer">Contact Us</a></li>
           <li class="nav-item">
             <input
               id="searchInput"
               type="text"
               placeholder="Search products..."
               class="form-control"
             />
           </li>
         </ul>
       </div>
     </div>
   </nav>

   <section id="home" style="padding-top:80px;">
     <div class="container">
       <h5>NEW ARRIVALS</h5>
       <h1><span>THE BEST</span> PRICES</h1>
       <p>Small touches. Big differences</p>
       <a href="#featured"><button>Shop Now</button></a>
     </div>
   </section>

   <section id="new" class="w-100">
     <div class="container">
       <div class="row p-0 m-0">
         <div class="one col-lg-4 col-md-12 col-12 p-0">
           <img class="img-fluid" src="1.png" alt="" />
           <div class="details">
             <h2>SOMETHINGGG</h2>
             <a href="#featured"><button>Shop Now</button></a>
           </div>
         </div>
         <div class="one col-lg-4 col-md-12 col-12 p-0">
           <img class="img-fluid" src="2.png" alt="" />
           <div class="details">
             <h2>SOMETHINGGG</h2>
             <a href="#featured"><button>Shop Now</button></a>
           </div>
         </div>
         <div class="one col-lg-4 col-md-12 col-12 p-0">
           <img class="img-fluid" src="3.png" alt="" />
           <div class="details">
             <h2>SOMETHINGGG</h2>
             <a href="#featured"><button>Shop Now</button></a>
           </div>
         </div>
       </div>
     </div>
   </section>

   <!-- PRODUCTS SECTION -->
   <section id="featured" class="my-5 pb-5">
     <div class="container text-center mt-5 py-5">
       <h3>Our featured</h3>
       <hr class="mx-auto" />
       <p>Here you can check out our new products with fair price on Blush Nest</p>
       <!-- Search message will appear here -->
       <p id="searchMessage" style="font-weight:bold; margin-top:1rem;"></p>
     </div>
     <div class="row mx-auto container-fluid" id="products-container">
       <!-- Products will be inserted here dynamically -->
     </div>
   </section>

   <footer id="footer" class="mt-5 py-5">
     <div class="row container mx-auto pt-5">
       <div class="footer-one col-lg-3 col-md-6 col-12">
         <img src="blush_nest.png" alt="" />
         <p>
           Lorem ipsum dolor sit amet consectetur adipisicing elit. Quod, earum?
           Neque impedit minus repellat...
         </p>
       </div>
       <div class="footer-one col-lg-3 col-md-6 col-12">
         <h5 class="pb-2">Featured</h5>
         <ul class="text-uppercase list-unstyled">
           <li><a href="#">yes</a></li>
           <li><a href="#">no</a></li>
           <li><a href="#">evet</a></li>
           <li><a href="#">yok</a></li>
           <li><a href="#">come</a></li>
           <li><a href="#">co</a></li>
           <li><a href="#">yes</a></li>
         </ul>
       </div>
       <div class="footer-one col-lg-3 col-md-6 col-12">
         <h5 class="pb-2">Contact Us</h5>
         <div>
           <a href="https://www.instagram.com/blush_nestt/" class="text-uppercase"
             >instagram</a
           >
         </div>
       </div>
     </div>
     <div class="copyright mt-5">
       <div class="row container ml-auto">
         <div class="col-lg-3 col-md-6 col-12 text-nowrap text-center">
           <p>BLUSH NEST © ALL RIGHTS RESERVED</p>
         </div>
         <div class="col-lg-3 col-md-6 col-12">
           <a href="https://www.instagram.com/blush_nestt/"
             ><i class="fab fa-instagram"></i
           ></a>
         </div>
       </div>
     </div>
   </footer>

   <script>
     // Your Firebase config here
     const firebaseConfig = {
       apiKey: "AIzaSyD5S7iY9FvfngaIjd0DDe7t8MMPAg2iIgc",
       authDomain: "blush-nest.firebaseapp.com",
       projectId: "blush-nest",
       storageBucket: "blush-nest.appspot.com",
       messagingSenderId: "579643377549",
       appId: "1:579643377549:web:3aca53fa8a6b2a950d1fc4",
       measurementId: "G-JZTLR8NMR1",
     };

     // Initialize Firebase
     firebase.initializeApp(firebaseConfig);
     const db = firebase.firestore();

     const productsContainer = document.getElementById("products-container");
     const searchInput = document.getElementById("searchInput");
     const featuredSection = document.getElementById("featured");
     const searchMessage = document.getElementById("searchMessage");

     let allProducts = [];

     // Load all products from Firestore once
     function loadProducts() {
       productsContainer.innerHTML = "";
       searchMessage.textContent = "";
       db.collection("products")
         .get()
         .then((querySnapshot) => {
           allProducts = [];
           querySnapshot.forEach((doc) => {
             const product = { id: doc.id, ...doc.data() };
             allProducts.push(product);
           });
           displayProducts(allProducts);
         })
         .catch((error) => {
           console.error("Error loading products:", error);
         });
     }

     // Display given products
     function displayProducts(products) {
       productsContainer.innerHTML = "";
       if (products.length === 0) {
         productsContainer.innerHTML = "<p>No products match your search.</p>";
         return;
       }
       products.forEach((product) => {
         const productHTML = `
           <div class="product text-center col-lg-3 col-md-4 col-12 mb-4">
             <img src="${product.imageUrl}" alt="${product.name}" class="img-fluid mb-3" />
             <h5 class="p-name">${product.name}</h5>
             <p class="p-desc">${product.description || ""}</p>
             <h4 class="p-price">${product.price}₺</h4>
           </div>
         `;
         productsContainer.insertAdjacentHTML("beforeend", productHTML);
       });
     }

     // Filter and scroll
     function searchProducts(term) {
       term = term.toLowerCase().trim();
       if (term.length === 0) {
         searchMessage.textContent = "";
         displayProducts(allProducts);
         return;
       }
       const filtered = allProducts.filter(
         (p) =>
           p.name.toLowerCase().includes(term) ||
           (p.description && p.description.toLowerCase().includes(term))
       );

       searchMessage.textContent = `Showing results for "${term}" (${filtered.length} found)`;

       featuredSection.scrollIntoView({ behavior: "smooth" });
       displayProducts(filtered);
     }

     // Search input listener
     searchInput.addEventListener("input", (e) => {
       searchProducts(e.target.value);
     });

     window.onload = () => {
       loadProducts();
     };
   </script>

   <script
     src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
   ></script>
   <script
     src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
   ></script>
</body>
</html>
